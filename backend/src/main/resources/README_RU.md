# Файлы конфигурации приложения

Эта директория содержит файлы конфигурации для Spring Boot приложения. Настройка использует систему профилей
для управления различными средами, обеспечивая гибкость и разделение ответственности.

---

## Стратегия конфигурации

Конфигурация распределена по нескольким файлам, загружаемым в зависимости от активного профиля Spring.

1.  **`application.yml` (Базовый)**: Содержит общие свойства, применимые ко всем средам.

2.  **`application-{profile}.yml` (Специфичные переопределения)**: Содержит свойства, которые переопределяют
    базовую конфигурацию для конкретного профиля.

Активные профили активируются через свойство `spring.profiles.active`.

---

## Описание файлов

-   **`application.yml`**
    -   **Назначение**: Основной, дефолтный файл конфигурации. Он определяет базу для всех остальных профилей.
    -   **Ключевые настройки**: Порт сервера по умолчанию, имя приложения, базовые конфигурации JPA.

-   **`application-dev.yml`**
    -   **Назначение**: Основной профиль для **разработки с Docker**, активируется командой `make run`.
    -   **Ключевые настройки**: Настраивает приложение для работы с Docker Compose. Полагается на переменные окружения для подключения к БД. Включает Flyway и `ddl-auto: none`.

-   **`application-local.yml`**
    -   **Назначение**: Профиль для **локальной разработки без Docker** (например, запуск из IDE).
    -   **Ключевые настройки**: Настраивает источник данных для подключения к локально запущенной базе данных MySQL (на `localhost`).

-   **`application-integration-test.yml`**
    -   **Назначение**: Используется для всех интеграционных тестов (локально и в CI), активируется командой `make test`.
    -   **Ключевые настройки**: Настроен для Testcontainers MySQL. Использует `create-drop` для управления схемой и отключает Flyway, так как Hibernate управляет схемой напрямую для тестов.

-   **`application-prod.yml`**
    -   **Назначение**: Профиль для **продакшен**-окружений.
    -   **Ключевые настройки**: Отключает детальное логирование SQL и устанавливает `ddl-auto` в `validate`. Рассчитывает на получение всех секретов из переменных окружения.

-   **`application-mysql.yml`** & **`application-postgresql.yml`**
    -   **Назначение**: Профили, специфичные для баз данных. Предоставляют правильный JDBC-драйвер, диалект Hibernate и пути для миграций Flyway.

-   **`application-security.yml`**
    -   **Назначение**: Централизует все конфигурации, связанные с безопасностью (Basic Auth, ограничение запросов). Включается автоматически файлом `application.yml`.
