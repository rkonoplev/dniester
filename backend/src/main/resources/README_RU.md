# Файлы конфигурации приложения

Эта директория содержит файлы конфигурации для Spring Boot приложения. Настройка использует систему профилей
для управления различными средами, обеспечивая гибкость и разделение ответственности.

---

## Стратегия конфигурации

Конфигурация распределена по нескольким файлам, загружаемым в зависимости от активного профиля Spring.

1.  **`application.yml` (Базовый)**: Содержит общие свойства, применимые ко всем средам, такие как пути API,
    номера портов и настройки JPA по умолчанию.

2.  **`application-{profile}.yml` (Специфичные переопределения)**: Содержит свойства, которые переопределяют
    базовую конфигурацию для конкретного профиля. Например, `application-mysql.yml` предоставляет настройки,
    специфичные для MySQL.

3.  **`application-security.yml`**: Выделенный файл для свойств, связанных с безопасностью (например, секреты JWT, CORS),
    который всегда включается.

Активные профили активируются через свойство `spring.profiles.active`, обычно передаваемое как аргумент
командной строки или в переменной окружения.

---

## Описание файлов

-   **`application.yml`**
    -   **Назначение**: Основной, дефолтный файл конфигурации. Он определяет базу для всех остальных профилей.
    -   **Ключевые настройки**: Порт сервера по умолчанию, имя приложения, базовые конфигурации JPA (например,
        open-in-view), и включает профиль `security` по умолчанию.

-   **`application-local.yml`**
    -   **Назначение**: Основной профиль для **локальной разработки**. Он включает функции, полезные для отладки.
    -   **Ключевые настройки**:
        -   Включает Flyway (`flyway.enabled: true`).
        -   Отключает автоматическую генерацию схемы (`ddl-auto: none`), передавая управление Flyway.
        -   Включает детальное логирование SQL (`show-sql: true`, `format_sql: true`) для анализа производительности.

-   **`application-ci.yml`**
    -   **Назначение**: Используется исключительно во время сборок Continuous Integration (CI), например,
        на GitHub Actions.
    -   **Ключевые настройки**: Использует базу данных H2 в памяти (`jdbc:h2:mem:testdb`) с управлением
        схемой `create-drop`. Flyway отключен, поскольку H2 создает схему автоматически. Оптимизирован
        для быстрого выполнения в CI.

-   **`application-mysql.yml`** & **`application-postgresql.yml`**
    -   **Назначение**: Профили, специфичные для баз данных. Они предоставляют правильный JDBC-драйвер и
        Hibernate-диалект для MySQL или PostgreSQL. Один из них должен быть активирован вместе с другим
        профилем (например, `local`).

-   **`application-security.yml`**
    -   **Назначение**: Централизует все конфигурации, связанные с безопасностью.
    -   **Ключевые настройки**: Время истечения срока действия JWT-токенов, секретные ключи (часто
        вынесенные вовне), политики CORS и пути, исключенные из фильтров безопасности. Он автоматически
        включается файлом `application.yml`.
