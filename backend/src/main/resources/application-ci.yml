# =========================================================
# application-ci.yml
# CI/CD pipeline profile.
# Runs with in-memory H2 database for fast and isolated tests.
# No connection to external DB required.
# =========================================================

server:
  port: 0   # Random port (not needed for tests)

spring:
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=MySQL
    driver-class-name: org.h2.Driver
    username: sa
    password: sa

  jpa:
    hibernate:
      ddl-auto: create-drop               # Fresh schema for each test run
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
    show-sql: false                       # Disable SQL logging for CI

logging:
  level:
    root: WARN                            # Keep logs clean in CI
    org.springframework.test: INFO        # Show test-related logs