# üîπ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ú–ò–ì–†–ê–¶–ò–ò: Drupal 6 ‚Üí News Platform (Spring Boot + MySQL 8)

## –®–ê–ì 1. –ó–∞–ø—É—Å–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ MySQL 5.7 –¥–ª—è –¥–∞–º–ø–∞ Drupal 6

**–ó–∞–ø—É—Å–∫:**
```bash
docker compose -f docker-compose.drupal.yml up -d
```

**–õ–æ–≥–∏:**
```bash
docker logs -f news-mysql-drupal6
```

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
docker exec -it news-mysql-drupal6 mysql -u root -p
# –ø–∞—Ä–æ–ª—å: root
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SHOW DATABASES;
USE a264971_dniester;
SHOW TABLES;
```

## –®–ê–ì 2. –≠–∫—Å–ø–æ—Ä—Ç + –∏–º–ø–æ—Ä—Ç –≤ –Ω–æ–≤—É—é –±–∞–∑—É

**–≠–∫—Å–ø–æ—Ä—Ç:**
```bash
docker exec -i news-mysql-drupal6 mysqldump -uroot -proot a264971_dniester > db_data/drupal6_fixed.sql
```

**–ò–º–ø–æ—Ä—Ç:**
```bash
docker exec -i news-mysql-drupal6 mysql -uroot -proot dniester < db_data/drupal6_fixed.sql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SHOW TABLES;
```

## LEGACY-–§–ê–ô–õ–´

–§–∞–π–ª—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –∏ —Ä–∞–Ω–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ø–∞–ø–∫–µ legacy/:
- DatabaseProperties.java - –∫–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- Makefile - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- docker-compose.drupal.yml - –≤—Ä–µ–º–µ–Ω–Ω–∞—è Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- docker-compose.override.yml - –ø—Ä–æ–¥–∞–∫—à–Ω-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker
- README.md - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ legacy-—Ñ–∞–π–ª–æ–≤

–≠—Ç–∏ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏.

---

## –ß–¢–û –ú–´ –§–ê–ö–¢–ò–ß–ï–°–ö–ò –ò–ú–ü–û–†–¢–ò–†–û–í–ê–õ–ò –í –ù–û–í–£–Æ –ë–ê–ó–£

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã dniester –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (users)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** Drupal users  
**–ü–æ–ª—è:**
- uid ‚Üí id
- name ‚Üí username
- mail ‚Üí email
- status ‚Üí status (1=–∞–∫—Ç–∏–≤–µ–Ω, 0=–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

### 2. –†–æ–ª–∏ (roles) –∏ —Å–≤—è–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—è–º–∏ (user_roles)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** Drupal role, users_roles  
**–ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—ã:**
- roles (id, name)
- user_roles (user_id, role_id)

### 3. –ö–æ–Ω—Ç–µ–Ω—Ç (content)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** node, node_revisions  
**–¶–µ–ª–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** content (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è, –±–µ–∑ –ø–æ–ª—è type)  
**–ü–æ–ª—è:**
- nid ‚Üí id
- title ‚Üí title
- body ‚Üí body
- teaser ‚Üí teaser
- created (UNIX timestamp) ‚Üí publication_date (DATETIME)
- uid ‚Üí author_id (FK ‚Üí users.id)

> **–í–∞–∂–Ω–æ:** —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (story, page, book) –±–æ–ª—å—à–µ –ù–ï —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ content.

### 4. –¢–∞–∫—Å–æ–Ω–æ–º–∏—è (terms, content_terms)
**–ò—Å—Ç–æ—á–Ω–∏–∫:** term_data, vocabulary, term_node  
**–¢–∞–±–ª–∏—Ü—ã:**
- terms (id, name, vocabulary)
- content_terms (content_id, term_id)

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CCK‚Äë–ø–æ–ª—è
**–ò—Å—Ç–æ—á–Ω–∏–∫:** content_type_* —Ç–∞–±–ª–∏—Ü—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)  
**–¶–µ–ª–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:** custom_fields (key-value)  
**–ü–æ–ª—è:**
- nid ‚Üí content_id
- –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ ‚Üí field_name
- –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí field_value

### –ò–¢–û–ì–û –≤ —á–∏—Å—Ç–æ–π —Å—Ö–µ–º–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã:
- users
- roles
- user_roles
- content
- terms
- content_terms
- custom_fields

## –®–ê–ì 3. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã

–í—ã–ø–æ–ª–Ω–∏—Ç—å db_data/migrate_from_drupal6_universal.sql  
–í—ã–ø–æ–ª–Ω–∏—Ç—å db_data/migrate_cck_fields.sql (–µ—Å–ª–∏ –µ—Å—Ç—å CCK)  
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

## –®–ê–ì 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π (UTF-8, –∫–∏—Ä–∏–ª–ª–∏—Ü–∞)

**–û—à–∏–±–∫–∞:** Incorrect string value '\xD0...'  
**–ü—Ä–∏—á–∏–Ω–∞:** —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ –≤ latin1  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SHOW CREATE TABLE a264971_dniester.node \G
```

**–†–µ—à–µ–Ω–∏–µ:** –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å content —Å UTF8:
```sql
DROP TABLE IF EXISTS content;
CREATE TABLE content (...) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;
```
–ó–∞–Ω–æ–≤–æ –≤—Å—Ç–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ node + node_revisions

## –®–ê–ì 5. –≠–∫—Å–ø–æ—Ä—Ç clean_schema.sql
```bash
docker exec -i news-mysql-drupal6 mysqldump -uroot -proot dniester > db_data/clean_schema.sql
```

## –®–ê–ì 6. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ MySQL 8.0

**–ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –Ω–µ–≤–µ—Ä–Ω–æ:**
```bash
docker compose -f docker-compose.yml down -v
```

**–ó–∞–ø—É—Å–∫:**
```bash
docker compose -f docker-compose.yml up -d mysql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```bash
docker logs news-mysql
# –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å Creating database dniester
```

## –®–ê–ì 7. –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è root –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

```bash
docker stop news-mysql
docker run -it --rm --name mysql-fix -v news-platform_mysql_data:/var/lib/mysql mysql:8.0 --skip-grant-tables --skip-networking
```

**–í –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ:**
```bash
docker exec -it mysql-fix mysql
```

**–í MySQL:**
```sql
FLUSH PRIVILEGES;
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';
```
–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å mysql-fix, —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å MySQL 8.0

## –®–ê–ì 8. –ò–º–ø–æ—Ä—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∞–º–ø–∞
```bash
docker exec -i news-mysql mysql -uroot -proot dniester < db_data/clean_schema.sql
```

## –®–ê–ì 9. –ü—Ä–æ–≤–µ—Ä–∫–∞

**–°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü:**
```sql
SHOW TABLES;
```

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:**
```sql
SELECT COUNT(*) FROM content;
# –æ–∂–∏–¥–∞–Ω–∏–µ ~12186 —Å—Ç—Ä–æ–∫
```

---

## üîπ –ö–†–ê–¢–ö–ò–ô –ü–õ–ê–ù:

1. –ü–æ–¥–Ω—è—Ç—å MySQL 8.0
2. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å clean_schema.sql
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –¥–∞–Ω–Ω—ã—Ö

---

## üîπ –ü–ï–†–ï–ù–û–° LEGACY-–§–ê–ô–õ–û–í

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –±—ã–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –ø–∞–ø–∫—É `legacy/` –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π —Å–ø—Ä–∞–≤–∫–∏:

- **`DatabaseProperties.java`** - –ö–ª–∞—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ç–∞–π–º–∞—É—Ç–∞–º–∏
- **`Makefile`** - –£—Å—Ç–∞—Ä–µ–≤—à–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ `docs/API_USAGE.md`)
- **`docker-compose.drupal.yml`** - –í—Ä–µ–º–µ–Ω–Ω–∞—è Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å MySQL 5.7
- **`docker-compose.override.yml`** - –ü—Ä–æ–¥–∞–∫—à–Ω-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **`ExampleTest.java`** - –ù–∞—á–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∏–∑ —Ä–∞–Ω–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–≠—Ç–∏ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è —ç–≤–æ–ª—é—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–º. –≤ `legacy/README.md`.

---

## üîπ –û–ü–ò–°–ê–ù–ò–ï SQL-–§–ê–ô–õ–û–í –î–õ–Ø –ú–ò–ì–†–ê–¶–ò–ò

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ SQL-—Ñ–∞–π–ª–æ–≤, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–µ–π —Ü–µ–ª—å—é:

–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö –∏ —Ñ–∞–π–ª–∞—Ö —Å–º. –≤ [Database Migration Scripts](../db_data/README.md).

### drupal6_fixed.sql
–ß–∏—Å—Ç—ã–π –¥–∞–º–ø –∏—Å—Ö–æ–¥–Ω–æ–π –±–∞–∑—ã Drupal 6, –ø–µ—Ä–µ–ª–∏—Ç—ã–π –≤ –±–∞–∑—É dniester –≤–Ω—É—Ç—Ä–∏ MySQL 5.7.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –∏ –∏–º–µ—Ç—å –Ω–æ–≤—ã–π —Å—Ç–∞—Ä—Ç.

### migrate_from_drupal6_universal.sql
–û—Å–Ω–æ–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç. –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (users, roles, user_roles, content, terms, content_terms) –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –æ—á–∏—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü Drupal.
–≠—Ç–æ –≥–ª–∞–≤–Ω—ã–π —à–∞–≥ –º–∏–≥—Ä–∞—Ü–∏–∏.

### detect_custom_fields.sql
–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –≤ –±–∞–∑–µ —Ç–∞–±–ª–∏—Ü—ã –≤–∏–¥–∞ content_type_*.
–ï—Å–ª–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç ‚Üí CCK-–ø–æ–ª–µ–π –Ω–µ –±—ã–ª–æ.
–ï—Å–ª–∏ –≤–µ—Ä–Ω—É–ª–∏—Å—å —Å—Ç—Ä–æ–∫–∏ ‚Üí –≤ –±–∞–∑–µ –±—ã–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å CCK.

### migrate_cck_fields.sql
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å content_type_* —Ç–∞–±–ª–∏—Ü—ã. –ü–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∏—Ö –¥–∞–Ω–Ω—ã–µ –≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É custom_fields (—Å—Ö–µ–º–∞ key ‚Üí value).
–ï—Å–ª–∏ CCK –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è, –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

### clean_schema.sql
–§–∏–Ω–∞–ª—å–Ω—ã–π –¥–∞–º–ø –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ö–µ–º—ã (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è migrate_from_drupal6_universal.sql –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ migrate_cck_fields.sql). –≠—Ç–æ—Ç —Ñ–∞–π–ª –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ MySQL 8.0 –¥–ª—è —Ä–∞–±–æ—Ç—ã News Platform.

---

## üîπ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨, –ï–°–¢–¨ –õ–ò –£ –¢–ï–ë–Ø CUSTOMFIELDS?

–í MySQL 5.7 (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä news-mysql-drupal6) –≤—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É:
```sql
SHOW TABLES LIKE 'content_type%';
```

–ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –≤–µ—Ä–Ω—É–ª—Å—è –ø—É—Å—Ç—ã–º ‚Üí —É —Ç–µ–±—è –Ω–µ—Ç CCK –ø–æ–ª–µ–π.
–ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ –≤—Ä–æ–¥–µ content_type_article, content_type_news –∏ –¥—Ä. ‚Üí –∑–Ω–∞—á–∏—Ç –±—ã–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è, –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ª–æ–∂–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ migrate_cck_fields.sql.

### –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í –ù–û–í–û–ô –ë–ê–ó–ï

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ —Å—Ç–∞—Ä—ã–º Drupal 6 (MySQL 5.7) —É–∂–µ —É–¥–∞–ª—ë–Ω –∏ —Ç–∞–±–ª–∏—Ü—ã content_type_* –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö CCK-–ø–æ–ª–µ–π –º–æ–∂–Ω–æ –≤ –Ω–æ–≤–æ–π –±–∞–∑–µ dniester.

–í—ã–ø–æ–ª–Ω–∏:
```sql
SELECT COUNT(*) FROM custom_fields;
```

–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç = 0 ‚Üí –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π –≤ Drupal 6 –Ω–µ –±—ã–ª–æ, –ª–∏–±–æ –æ–Ω–∏ –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã.
–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç > 0 ‚Üí –∑–Ω–∞—á–∏—Ç –≤ —Å—Ç–∞—Ä–æ–π –±–∞–∑–µ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏ –∏ –±—ã–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∫–∞–∫ key-value –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É custom_fields.

---

## üîπ –ü–û–°–õ–ï –ó–ê–í–ï–†–®–ï–ù–ò–Ø –ú–ò–ì–†–ê–¶–ò–ò

–ö–æ–≥–¥–∞ –≤—ã —É–¥–æ—Å—Ç–æ–≤–µ—Ä–∏–ª–∏—Å—å, —á—Ç–æ –±–∞–∑–∞ clean_schema.sql —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ MySQL 8.0 (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä news-mysql), –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Drupal 6 –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

### Docker volumes:

‚úÖ **news-platform_mysql_data** ‚Üí –æ—Å—Ç–∞–≤–∏—Ç—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MySQL 8.0 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º news-mysql).  
‚ùå **news-platform_mysql_data_drupal6** ‚Üí –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (—ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–º –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ Drupal 6).

–î–∞–ª–µ–µ –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π:

### –í–ê–†–ò–ê–ù–¢ 1 ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Drupal 6 –∏ –æ—Å—Ç–∞–≤–∏—Ç—å volume ¬´–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π¬ª:
```bash
docker stop news-mysql-drupal6
```

### –í–ê–†–ò–ê–ù–¢ 2 ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ª–∏—à–Ω–∏–π volume (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞):
```bash
docker compose -f docker-compose.drupal.yml down -v
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –≤–∞—Å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–π MySQL 8.0 (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä news-mysql) –∏ –µ–≥–æ volume news-platform_mysql_data, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã News Platform.

---

## üîπ –ó–ê–ü–£–°–ö –ü–†–û–ï–ö–¢–ê

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –Ω–æ–≤–∞—è –±–∞–∑–∞ clean_schema.sql –≥–æ—Ç–æ–≤–∞ –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.

–í–∞—Ä–∏–∞–Ω—Ç—ã:

### üîπ –í–ê–†–ò–ê–ù–¢ –ê ‚Äî —Ç–æ–ª—å–∫–æ –±–∞–∑–∞ (MySQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö)

**–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
docker compose -f docker-compose.yml down -v
```

**–ü–æ–¥–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ MySQL:**
```bash
docker compose -f docker-compose.yml up -d mysql
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
docker logs -f news-mysql
```

**–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–∞–ª–∏—Ç–∞):**
```bash
docker exec -i news-mysql mysql -uroot -proot dniester < db_data/clean_schema.sql
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```bash
docker exec -it news-mysql mysql -uroot -proot -e "SHOW TABLES;" dniester
docker exec -it news-mysql mysql -uroot -proot -e "SELECT COUNT(*) FROM content;" dniester
```

### üîπ –í–ê–†–ò–ê–ù–¢ –ë ‚Äî –ø–æ–ª–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (MySQL + backend Spring Boot)

**–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env.dev —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:**
```bash
MYSQL_ROOT_PASSWORD=root
MYSQL_DATABASE=dniester
SPRING_LOCAL_PORT=8080
SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/dniester?useUnicode=true&characterEncoding=utf8mb4&useSSL=false
SPRING_DATASOURCE_USERNAME=root
SPRING_DATASOURCE_PASSWORD=root
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:**
```bash
docker compose --env-file .env.dev up -d
```

**–í –∏—Ç–æ–≥–µ:**
- news-mysql ‚Üí –±–∞–∑–∞ MySQL 8 —Å –¥–∞–Ω–Ω—ã–º–∏
- news-app ‚Üí –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Spring Boot

**–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É:**
```bash
docker exec -i news-mysql mysql -uroot -proot dniester < db_data/clean_schema.sql
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É:**
```bash
docker exec -it news-mysql mysql -uroot -proot -e "SELECT COUNT(*) FROM content;" dniester
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```bash
docker logs -f news-app
```/clean_schema.sql
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```bash
docker exec -it news-mysql mysql -uroot -proot -e "SHOW TABLES;" dniester
docker exec -it news-mysql mysql -uroot -proot -e "SELECT COUNT(*) FROM content;" dniester
```

### üîπ –í–ê–†–ò–ê–ù–¢ –ë ‚Äî –ø–æ–ª–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (MySQL + backend Spring Boot)

**–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env.dev —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:**
```bash
MYSQL_ROOT_PASSWORD=root
MYSQL_DATABASE=dniester
SPRING_LOCAL_PORT=8080
SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/dniester?useUnicode=true&characterEncoding=utf8mb4&useSSL=false
SPRING_DATASOURCE_USERNAME=root
SPRING_DATASOURCE_PASSWORD=root
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:**
```bash
docker compose --env-file .env.dev up -d
```

**–í –∏—Ç–æ–≥–µ:**
- news-mysql ‚Üí –±–∞–∑–∞ MySQL 8 —Å –¥–∞–Ω–Ω—ã–º–∏
- news-app ‚Üí –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Spring Boot

**–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É:**
```bash
docker exec -i news-mysql mysql -uroot -proot dniester < db_data/clean_schema.sql
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É:**
```bash
docker exec -it news-mysql mysql -uroot -proot -e "SELECT COUNT(*) FROM content;" dniester
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```bash
docker logs -f news-app
```