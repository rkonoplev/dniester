# Техническая спецификация для панели администратора

> Для определения ключевых терминов и технологий, пожалуйста, обратитесь к **[Глоссарию](./GLOSSARY_RU.md)**.

Этот документ описывает технические требования к интерфейсу панели администратора Phoebe CMS.

---

## 1. Роли и разрешения

### 1.1 Управление доступом на основе ролей

Phoebe CMS использует двухролевую систему: **ADMIN** (полный доступ) и **EDITOR** (только собственный контент).

**Детали реализации**: См. [Руководство по безопасности ролей](./SECURITY_ROLES_RU.md) для полных требований.

### 1.2 Безопасность в UI
- **Интерфейс на основе ролей**: Элементы UI отображаются/скрываются в зависимости от роли и владения
  контентом.
- **Валидация в реальном времени**: Бэкенд предотвращает неавторизованные операции.

---

## 2. Управление контентом

### 2.1 Страница со списком контента

#### Для пользователей с ролью ADMIN
- **Список с пагинацией** всех элементов контента.
- **Полный набор кнопок действий** для каждого элемента:
  - **Создать**: Переход к форме создания.
  - **Редактировать**: Переход к форме редактирования (любой элемент).
  - **Удалить**: Удаление любого элемента с подтверждением.
  - **Опубликовать/Снять с публикации**: Изменение статуса любого элемента.

#### Для пользователей с ролью EDITOR
- **Список с пагинацией** всех элементов (чужой контент в режиме только для чтения).
- **Ограниченный набор кнопок** в зависимости от авторства:
  - **Создать**: Переход к форме создания.
  - **Редактировать**: Доступно только для собственных материалов.
  - **Удалить**: Доступно только для собственных материалов, с подтверждением.
  - **Опубликовать/Снять с публикации**: Доступно только для собственных материалов.

---

## 3. Термины таксономии

### 3.1 Страница управления терминами
- **Список с пагинацией** терминов таксономии.
- Функциональность **добавления новых терминов**.
- **Удаление существующих терминов** с подтверждением.
- Управление словарями (например, категории, теги).

---

## 4. Массовые операции

### 4.1 Массовые операции для ADMIN
- **Массовое удаление/снятие с публикации** всего контента сайта.
- **Массовое управление ролями** пользователей.
- **Общесистемные операции** с диалогами подтверждения.
- **Выбор по термину**: Выбор контента, соответствующего определенному термину.
- **Выбор по автору**: Выбор контента определенного автора.

### 4.2 Массовые операции для EDITOR (ЗАПРЕЩЕНЫ)
- **НЕТ МАССОВЫХ ОПЕРАЦИЙ** - роль EDITOR ограничена операциями с одним элементом.
- **Удаление**: Может удалять только один элемент за раз (собственный контент).
- **Публикация**: Может изменять статус только одного элемента за раз (собственный контент).
- **Безопасность**: Бэкенд запрещает EDITOR доступ к эндпоинтам массовых операций.

---

## 5. Страница создания/редактирования контента

### 5.1 Поля формы
- **Заголовок**: Текстовое поле с валидацией.
- **Анонс**: Текстовая область для превью.
- **Тело контента**: Визуальный редактор (WYSIWYG).
- **Выбор термина**: Выпадающее меню для назначения термина.
- **Дата публикации**: Назначается автоматически при создании.

### 5.2 Функции визуального редактора (WYSIWYG)
- **Кнопки форматирования текста**: Жирный, курсив, подчеркнутый.
- **Кнопка вставки гиперссылки**.
- **Кнопка вставки медиа** для внешних изображений и видео.

---

## 6. Безопасность и валидация ввода

### 6.1 Валидация ввода
- **Строгие правила валидации** для всех полей ввода.
- **Предотвращение техник взлома**: SQL-инъекции, XSS, CSRF.

### 6.2 Безопасность визуального редактора
- **Разрешенный контент**: Только форматирование текста и вставка внешних медиа.
- **Очистка контента**: Удаление или очистка всех HTML/script тегов, кроме разрешенных.
- **Подход "белого списка"** для разрешенных HTML-тегов и атрибутов.

---

## 7. Технические требования

### 7.1 Пагинация
- **Все страницы со списками** должны включать пагинацию.
- **Настраиваемые размеры страниц** (10, 25, 50, 100 элементов на страницу).
- **Элементы управления навигацией** (Назад, Вперед, номера страниц).

### 7.2 Пользовательский опыт
- **Диалоги подтверждения** для деструктивных действий (удаление, массовые операции).
- **Уведомления об успехе/ошибке** для всех операций.
- **Адаптивный дизайн** для планшетов и десктопов.
- **Поддержка навигации с клавиатуры** для доступности.
