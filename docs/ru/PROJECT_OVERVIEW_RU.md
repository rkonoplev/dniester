> [Вернуться к содержанию документации](./README.md)

# Обзор проекта Phoebe CMS

> Для определения ключевых терминов и технологий, пожалуйста, обратитесь к **[Глоссарию](./GLOSSARY_RU.md)**.

## Обзор проекта
**Название**: Phoebe — Open Source Headless CMS
**Тип**: Open Source Headless система управления контентом (гибридная архитектура)
**Контекст миграции**: Проект был разработан для облегчения миграции с устаревших систем, таких как Drupal 6, на современный Headless Spring Boot с опциональными Frontend-шаблонами.
**Статус**: Headless Backend готов к продакшену. Референсные Frontend-шаблоны находятся в активной разработке.
**Лицензия**: MIT (Open Source)

## Технологический стек

### Headless Backend (Готов к продакшену)
- **Фреймворк**: Spring Boot 3.x
- **Язык**: Java 21
- **База данных**: MySQL 8.0, PostgreSQL 12+
- **Безопасность**: Spring Security с настраиваемой аутентификацией (планируется миграция на OAuth 2.0 + 2FA для всех ролей).
- **API**: REST с документацией OpenAPI/Swagger
- **Кэширование**: Caffeine (In-Memory)
- **Ограничение запросов**: Bucket4j с IP-based buckets
- **Сборка**: Gradle 8.7
- **Тестирование**: JUnit 5 (unit тесты с моками, интеграционные тесты с Testcontainers MySQL)
- **Миграция**: Spring Boot миграции (V1-V6)

### Референсные Frontend-шаблоны (Опционально)
- **Фреймворки**: Angular с Universal (SSR) и Next.js (React) с SSR/SSG.
- **Назначение**: Референсные реализации для быстрого развертывания.
- **Дизайн**: Чистый, адаптивный макет.
- **SEO**: Статические URL, SSR, JSON-LD, OpenGraph метаданные
- **Брендинг**: Настраиваемая система тем
- **Функции**: Поиск, темная тема, push-уведомления (в активной разработке).

### Инфраструктура
- **Контейнеризация**: Docker (Testcontainers для тестов, опциональный Docker Compose для локальной разработки)
- **CI/CD**: GitHub Actions с унифицированным подходом Testcontainers
- **Качество кода**: Checkstyle, PMD, JaCoCo coverage
- **База данных**: MySQL или PostgreSQL (Testcontainers для тестирования, Docker для локальной разработки)
- **Безопасность**: GitLeaks (используется как инструмент для локального сканирования секретов, не является автоматическим шагом в CI).

## Гибридная Headless архитектура

**Phoebe** следует **гибридному Headless** подходу, обеспечивая максимальную гибкость:

- **Headless ядро**: Полный REST API для разработки пользовательских frontend
- **Референсные Frontend-шаблоны**: Опциональные шаблоны (Angular и Next.js) для быстрого развертывания
- **API-First**: Вся функциональность доступна через REST endpoints
- **Без привязки к поставщику**: Используйте наши шаблоны или создайте свой frontend
- **Профили конфигурации**: Проект использует профили Spring Boot для управления конфигурацией в различных средах (локальная,
тестовая, продакшен). Каждый профиль представлен отдельным `application-{profile}.yml` файлом.

Подробное описание всех профилей и их настроек доступно в [Руководстве по конфигурации](CONFIG_GUIDE_RU.md).

## Структура проекта
```
phoebe/
├── backend/                    # Headless Spring Boot API
├── frontends/                  # Опциональные референсные frontend-шаблоны
│   ├── angular/                # Референсная реализация на Angular
│   └── nextjs/                 # Референсная реализация на Next.js (React)
├── docs/                     # Документация (английская и русская)
├── .github/workflows/        # CI/CD пайплайны
├── docker-compose.yml        # Среда разработки
└── README.md                 # Документация проекта
```

## Основные сущности и схема базы данных

### News (таблица content)
- **Описание**: Гибкая сущность для контента, может представлять статьи, страницы и т.д.
- **Связи**: ManyToOne → User (автор), ManyToMany → Term (категории/теги)

### User (таблица users)
- **Описание**: Аутентификация и авторизация с ролевым доступом.
- **Связи**: OneToMany → News, ManyToMany → Role

### Term (таблица terms)
- **Описание**: Система таксономии с группировкой по словарям.
- **Связи**: ManyToMany → News

### Role (таблица roles)
- **Описание**: Роли ADMIN, EDITOR с детализированными разрешениями.
- **Связи**: ManyToMany → User, ManyToMany → Permission

### Permission (таблица permissions)
- **Описание**: Детализированные разрешения (например, `news:read`, `users:create`).

## Headless API Endpoints

### Public Content API (`/api/public/news`)
- `GET /` - Поиск опубликованного контента (пагинация, фильтры).
- `GET /{id}` - Получить опубликованный контент по ID.
- `GET /term/{termId}` - Получить контент по ID термина.
- `GET /terms?termIds=1,3,5` - Получить контент по нескольким ID терминов.

### Content Management API (`/api/admin/news`)
- `GET /` - Поиск всего контента (опублидованного и черновиков).
- `POST /` - Создать новый контент.
- `PUT /{id}` - Обновить существующий контент.
- `DELETE /{id}` - Удалить контент.

## Ключевые проектные решения

1. **Гибридная Headless архитектура**: API-first с опциональными референсными frontend-шаблонами.
2. **Open Source**: MIT лицензия для свободного использования и модификации.
3. **Фокус на гибкость**: Спроектировано как универсальный контент-хаб.
4. **API-First**: Вся функциональность доступна через REST endpoints.
5. **Без привязки к поставщику**: Свобода выбора любой frontend-технологии.
6. **Профессиональный уровень**: Безопасность, кэширование и ограничение запросов корпоративного уровня.
7. **Дружелюбность к миграции**: Инструменты для миграции с устаревших CMS.
8. **Docker-ориентированная разработка**: Проект активно использует Docker для локальной разработки и развертывания, хотя Docker-контейнеры не всегда требуются для базовой разработки (например, для юнит-тестов).
9. **Современный стек**: Java 21, Spring Boot 3.x, MySQL 8.0, PostgreSQL 12+.
10. **Расширяемость**: Архитектура, готовая к плагинам и интеграциям.

## Целевая аудитория

### Профессиональные команды разработки
- Агентства, требующие кастомные frontend-решения для клиентов.
- Компании с существующими мобильными приложениями, которым нужен бэкенд для контента.
- Организации, которым требуется распространение контента на несколько платформ.

### Бизнес и организации
- Компании, которым нужен надежный и современный бэкенд для сайта.
- Стартапы, ищущие экономичные и масштабируемые CMS-решения.
- Организации, мигрирующие с устаревших или монолитных платформ.
- Команды, которые хотят начать с одного из референсных шаблонов и кастомизировать его.

Этот документ предоставляет полный контекст для понимания headless архитектуры Phoebe CMS, текущих
возможностей и видения современной, гибкой системы управления контентом.
