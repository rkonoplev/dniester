# Техническая спецификация Frontend (Next.js)

> **Детали текущей реализации**: Подробный обзор реализованных функций,
> инструкции по запуску и планы дальнейшего развития можно найти в файле
> **[README фронтенда Next.js](../../frontends/nextjs/README_RU.md)**.
>
> **Статус реализации**: ✅ **ЗАВЕРШЕНО** - Фронтенд полностью реализован и готов к использованию.

## 1. Общие цели
- Разработать **современный, адаптивный frontend для новостного портала**.
- Следовать **принципам дизайна, вдохновленным Google News**: чистый, просторный, mobile-first,
  с высокой читаемостью.
- Обеспечить **дружественную к SEO структуру** со статическими URL для всех новостных статей.
- Гарантировать **доступность (WCAG 2.1 AA)** и **быструю скорость загрузки**.

---

## 2. Технологический стек
- **Фреймворк:** Next.js (React, поддерживает SSR/SSG для SEO и производительности).
- **UI-библиотека:** Material UI (MUI).
- **Стилизация:** Кастомная тема Material UI (переопределения для брендинга, типографики и цветов).
- **Типографика:** Roboto (базовый) + Roboto Slab / Serif для заголовков статей.

---

## 3. Макет и страницы

### 3.1 Главная страница
- Чистая многоколоночная сеточная верстка:
  - Десктоп: 2–3 колонки.
  - Мобильные: 1 колонка.
- Блок с главной статьей наверху (большое изображение, заголовок, анонс).
- Второстепенные статьи ниже с изображениями среднего размера.
- Небольшие новостные заметки в виде компактных карточек.
- Панель навигации по категориям наверху.

### 3.2 Страница категории
- Список статей с пагинацией, принадлежащих к выбранной категории.
- Заголовок категории, выделенный акцентным цветом бренда.

### 3.3 Страница статьи
- Крупный заголовок с засечками (serif).
- Главное изображение (адаптивное, до ~800px в ширину).
- Дата публикации, автор и категория.
- Полное содержимое с изображениями и встроенными HTML-элементами.
- Похожие статьи внизу.
- Поддержка SEO-метаданных, OpenGraph и Twitter-карт.

### 3.4 Статические страницы
- Страница "О нас".
- Страница архива (фильтр по дате/категории).

---

## 4. Функциональность

### 4.1 SEO и URL
- **Гибридная стратегия рендеринга**: Использовать возможности рендеринга Next.js для максимизации
  производительности и SEO.
  - **Рендеринг на стороне сервера (SSR)**: Для динамических страниц, таких как главная и списки
    категорий, чтобы контент всегда был свежим и немедленно индексируемым.
  - **Генерация статического сайта (SSG)**: Для отдельных страниц статей и статичных страниц
    (`О нас`, `Контакты`), обеспечивая максимально быструю загрузку.
  - **Инкрементальная статическая регенерация (ISR)**: Опционально использовать ISR для пересборки
    статических страниц в фоновом режиме через заданные интервалы, сочетая скорость статики со
    свежестью динамического контента.
- **Статические URL**: Статические, человекочитаемые URL для статей (формат `/node/{id}`,
  например, `/node/15378`) и категорий (`/category/{id}`).
- **Структурированные данные**: Внедрить JSON-LD (схема `NewsArticle`) для предоставления богатых
  метаданных поисковым системам, улучшая внешний вид результатов поиска (расширенные сниппеты).
- **Мета-теги**: Динамически генерировать `<title>`, `<meta name="description">` и OpenGraph теги для
  каждой страницы, чтобы обеспечить оптимальное отображение при репостах в социальных сетях и
  корректную индексацию.

### 4.2 Адаптивный дизайн
- Макет по принципу Mobile-first.
- Адаптивная типографика и "резиновые" изображения.
- Рекомендуемые размеры изображений:
  - Главная статья: ~600–800px в ширину.
  - Стандартные статьи: ~320–400px в ширину.
  - Миниатюры: ~160–200px в ширину.

### 4.3 Доступность
- Соответствие WCAG 2.1 AA.
- ARIA-атрибуты, правильный контраст, навигация с клавиатуры.

### 4.4 Темизация и брендинг
- **Базовые цвета**:
  - Основной: Темно-синий (#1c355e).
  - Второстепенный: Глубокий красный (#cc0000).
  - Фон: Белый (#ffffff) или почти белый (#fdfcf8).
  - Нейтральные серые акценты для границ и разделителей (#eeeeee).
- **Использование**:
  - Заголовки и ссылки: Темно-синий.
  - Выделение категорий (например, "Аналитика"): Красный.
  - Панель навигации: Темно-синий фон с белым текстом.
- **Типографика**:
  - Заголовки: С засечками (Roboto Slab).
  - Основной текст: Без засечек (Roboto).

---

---

## 5. Реализованные функции

### 5.1 Основная инфраструктура
- **Настройка проекта**: Next.js с React, Material UI (MUI) и Axios.
- **Docker интеграция**: Dockerfile для Next.js приложения и обновленный docker-compose.yml
  с сервисом nextjs-app на порту 3000.
- **Переменные окружения**: Конфигурация для базового URL бэкенд API (.env.local).

### 5.2 Пользовательский интерфейс и темизация
- **Кастомная тема Material UI**: Поддержка светлой и темной темы с переключателем в футере.
- **Глобальный Layout компонент**: Единообразный header, основная область контента и footer.
- **Кастомная страница 404**: Для необработанных маршрутов.

### 5.3 Аутентификация и авторизация
- **AuthContext**: Глобальное управление статусом аутентификации и ролями (ADMIN/EDITOR).
- **Страница входа** (/admin/login): С валидацией на фронтенде для имени пользователя и пароля.
- **Защищенные маршруты**: ProtectedRoute и AdminRoute компоненты для контроля доступа.
- **Динамическая AdminBar**: Отображается только для аутентифицированных пользователей.

### 5.4 Публичные страницы контента
- **Главная страница** (/): SSR отображение последних новостных статей.
- **Страница статьи** (/node/[id]): SSG с ISR для оптимальной производительности и SEO.
- **Страница категории** (/category/[id]): SSR список статей определенной категории.
- **Страница поиска** (/search): Форма поиска с интеграцией с бэкенд API.
- **Информационные страницы**: Заглушки для ссылок в футере.

### 5.5 Административная панель (CRUD операции)
- **Управление новостями**: Список, создание, редактирование и удаление статей.
- **Управление таксономией**: Полный CRUD для терминов и категорий.
- **Управление пользователями**: Просмотр и редактирование ролей пользователей.
- **Валидация на фронтенде**: Комплексная валидация форм согласно VALIDATION_GUIDE.md.

### 5.6 Обработка контента
- **HTML рендеринг**: Поддержка HTML контента и YouTube встраиваний в полях teaser и body.
- **Безопасная обработка**: Использование SafeHtml обработки бэкенда.

---

## 6. Будущие улучшения (опционально)
- Полнотекстовый поиск с автодополнением (например, с использованием Pagefind).
- "Ленивая" загрузка изображений и бесконечная прокрутка на страницах категорий.
- Push-уведомления для срочных новостей.
- Интеграция OAuth 2.0 + JWT для улучшенной безопасности аутентификации.
- Возможности загрузки файлов для изображений и других медиа.
