# –ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å Drupal 6

> **üéØ –¶–µ–ª—å:** –ë—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è, –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∞–º–ø–∞ Drupal 6,
> —Å –ø–æ–º–æ—â—å—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π **Flyway**.

---

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä—É—á–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é. –î–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ
–¥–∞–º–ø–∞ Drupal 6 –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –æ–Ω–∏ –±—ã–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã
–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç Flyway (`V3__insert_sample_data.sql`), –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é
–∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞.

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ª—é–±–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –∑–∞–ø—É—Å—Ç–∏–≤—à–∏–π –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è, –ø–æ–ª—É—á–∏—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
—Å —É–∂–µ –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –≤ –Ω–µ–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –±–µ–∑ —Ä—É—á–Ω—ã—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å SQL-–¥–∞–º–ø–∞–º–∏.

---

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å –Ω—É–ª—è

–î–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ —Å –ø–æ–ª–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—Ü–µ—Å—Å
—Ç–µ–ø–µ—Ä—å –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–µ–¥–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ.

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone <URL –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
    cd phoebe
    ```

2.  **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω.**

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å—Ç–∏—Ç –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
docker compose up --build
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏?

1.  **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:** `docker-compose` —Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑ –≤–∞—à–µ–≥–æ Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å—Ç–∏—Ç
    –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `phoebe-app` (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ) –∏ `phoebe-mysql` (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL 8.0).

2.  **–°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π –±–∞–∑—ã:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `phoebe-mysql` —Å–æ–∑–¥–∞—Å—Ç –ø—É—Å—Ç—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –∏–º–µ–Ω–µ–º `dniester`.

3.  **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Flyway:**
    - –í–∞—à–µ Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`phoebe-app`) —Å—Ç–∞—Ä—Ç—É–µ—Ç –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –ø—É—Å—Ç–æ–π –±–∞–∑–µ.
    - **Flyway**, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ–±–Ω–∞—Ä—É–∂–∏—Ç, —á—Ç–æ –±–∞–∑–∞ –ø—É—Å—Ç–∞.
    - Flyway –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ SQL-—Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –ø–∞–ø–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–π:
      - `V1__initial_schema.sql`: –°–æ–∑–¥–∞—Å—Ç –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü (`users`, `content` –∏ —Ç.–¥.).
      - `V3__insert_sample_data.sql`: **–ó–∞–ø–æ–ª–Ω–∏—Ç —ç—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã–º–∏**, –≤–∫–ª—é—á–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–æ–ª–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç.
      - `V4-V7`: –ü—Ä–∏–º–µ–Ω—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã (—É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–æ–≤, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞).
      - `V8-V9`: –ù–∞—Å—Ç—Ä–æ—è—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤—è—Ç –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
      - `V10`: –î–æ–±–∞–≤–∏—Ç –ø–æ–ª–µ `site_url` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ URL —Å–∞–π—Ç–∞.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è, –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏.

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ, –ø–æ–¥–∫–ª—é—á–∏–≤—à–∏—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
docker exec -it phoebe-mysql mysql -uroot -proot

# –í–Ω—É—Ç—Ä–∏ MySQL –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã
USE phoebe_db;
SELECT COUNT(*) FROM content; -- –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏
SELECT COUNT(*) FROM users;   -- –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT COUNT(*) FROM permissions; -- –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
SELECT site_url FROM channel_settings; -- –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –±–∞–∑–æ–≤—ã–π URL —Å–∞–π—Ç–∞
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ —Ä—É—á–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ SQL-–¥–∞–º–ø–æ–≤, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —É –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

–°—Ç–∞—Ä–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ (`MIGRATION_DRUPAL6_RU.md`) —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –∞—Ä—Ö–∏–≤–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫
–∏–º–µ–Ω–Ω–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ `drupal6_working.sql` –±—ã–ª–∏ –æ–¥–Ω–∞–∂–¥—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç Flyway.
