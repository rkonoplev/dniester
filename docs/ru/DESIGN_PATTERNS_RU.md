# Паттерны проектирования в проекте

В данном проекте используется ряд общепринятых паттернов проектирования для обеспечения гибкости,
масштабируемости и поддерживаемости кодовой базы. Этот документ описывает ключевые паттерны и их
конкретную реализацию в системе.

[English Version](./DESIGN_PATTERNS.md)

---

## 1. Порождающие паттерны (Creational Patterns)

Эти паттерны отвечают за создание объектов.

-   **Singleton (Синглтон)**
    -   **Реализация:** Применяется фреймворком Spring ко всем компонентам, управляемым через IoC-контейнер
        (аннотированным `@Service`, `@Repository`, `@Controller`, `@Component`). Spring по умолчанию
        создает только один экземпляр (бин) каждого компонента, который переиспользуется во всем приложении.
    -   **Назначение:** Обеспечивает консистентность состояния и экономию ресурсов. В контексте данных,
        паттерн Синглтон также может быть применен к сущностям, которые представляют уникальную,
        общесистемную конфигурацию.
    -   **Пример (Синглтон данных):** Сущность `ChannelSettings` предназначена для хранения глобальных,
        уникальных настроек для всей CMS (например, заголовок сайта, мета-теги, HTML футера).
        Концептуально, в базе данных должна существовать только одна запись `ChannelSettings`, что делает
        ее Синглтоном на уровне данных. Сервисный слой приложения обеспечивает эту уникальность, всегда
        извлекая и обновляя эту единственную запись.

-   **Factory Method (Фабричный метод) / Abstract Factory (Абстрактная фабрика)**
    -   **Реализация:** Неявно используется Spring IoC-контейнером.
    -   **Назначение:** Контейнер Spring выступает в роли фабрики, которая создает, конфигурирует и внедряет
        объекты (бины) по запросу (например, через `@Autowired`). Это избавляет компоненты от необходимости
        самостоятельно создавать свои зависимости.

-   **Builder (Строитель)**
    -   **Реализация:** Рекомендуется к использованию при создании сложных объектов, особенно DTO и сущностей
        в модульных и интеграционных тестах. Например, с использованием Lombok `@Builder`.
    -   **Назначение:** Позволяет конструировать объекты пошагово, делая код более читаемым и безопасным
        по сравнению с конструкторами с большим количеством параметров.

---

## 2. Структурные паттерны (Structural Patterns)

Эти паттерны отвечают за композицию классов и объектов.

-   **Proxy (Заместитель)**
    -   **Реализация:** Активно используется Spring AOP (аспектно-ориентированное программирование) для реализации
        сквозной функциональности.
    -   **Назначение:** Spring создает прокси-объекты вокруг бинов для добавления дополнительной логики до,
        после или вокруг вызова методов. Яркие примеры — аннотации `@Transactional` (управление транзакциями),
        `@Cacheable` (кэширование) и механизмы Spring Security.

-   **Adapter (Адаптер)**
    -   **Реализация:** Частично реализуется через использование DTO (Data Transfer Object) и мапперов (например, MapStruct).
    -   **Назначение:** DTO адаптируют внутреннюю структуру данных (JPA-сущности) к формату, необходимому
        для внешних клиентов (API-ответы), скрывая внутренние детали и предотвращая их утечку. Мапперы
        помогают автоматизировать этот процесс адаптации.

---

## 3. Поведенческие паттерны (Behavioral Patterns)

Эти паттерны отвечают за взаимодействие между объектами.

-   **Strategy (Стратегия)**
    -   **Реализация:** Является основой многих компонентов Spring, особенно Spring Security, а также
        может быть реализована для выбора различных алгоритмов обработки данных.
    -   **Назначение:** Позволяет определять семейство алгоритмов, инкапсулировать каждый из них и делать
        их взаимозаменяемыми. Например, механизм аутентификации может быть легко переключен с Basic Auth
        на OAuth 2.0 путем замены одной "стратегии" на другую.

-   **Template Method (Шаблонный метод)**
    -   **Реализация:** Используется в таких классах Spring, как `JdbcTemplate` и `RestTemplate`.
    -   **Назначение:** Задает "скелет" алгоритма в операции, оставляя определение некоторых шагов
        подклассам. Это позволяет избежать дублирования кода для стандартных операций (например, открытие/закрытие
        соединений, обработка исключений).

---

## 4. Архитектурные паттерны и идиомы

-   **Layered Architecture (Слоёная архитектура)**
    -   **Реализация:** Основа структуры приложения. Код четко разделен на слои:
        -   `@Controller` (Presentation Layer)
        -   `@Service` (Business Logic/Service Layer)
        -   `@Repository` (Data Access Layer)
    -   **Назначение:** Обеспечивает разделение ответственности, улучшает тестируемость и поддерживаемость.

-   **Dependency Injection (DI) / Inversion of Control (IoC)**
    -   **Реализация:** Ключевой принцип Spring Framework, реализуемый через аннотацию `@Autowired`.
    -   **Назначение:** Компоненты не создают свои зависимости, а получают их извне от IoC-контейнера.
        Это уменьшает связанность кода и упрощает модульное тестирование.

-   **Data Transfer Object (DTO)**
    -   **Реализация:** Используется для всех входящих запросов и исходящих ответов API.
    -   **Назначение:** Разделяет внутреннюю модель данных (JPA Entities) и внешнее представление (API),
        повышая безопасность и гибкость системы.

-   **Repository (Репозиторий)**
    -   **Реализация:** Применяется через интерфейсы Spring Data JPA (например, `JpaRepository`).
    -   **Назначение:** Абстрагирует слой доступа к данным от остального приложения, скрывая детали
        реализации запросов к базе данных.
